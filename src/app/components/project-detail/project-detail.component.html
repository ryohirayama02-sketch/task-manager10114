<h2>プロジェクト詳細</h2>

<div *ngIf="project; else loading" class="project-card">
  <div
    style="display: flex; justify-content: space-between; align-items: center"
  >
    <h3>{{ project.projectName }}</h3>

    <!-- ✅ カード右下に＋タスクボタン -->
    <button
      mat-raised-button
      color="accent"
      class="add-task-button"
      (click)="openAddTaskDialog()"
    >
      ＋ タスク
    </button>
  </div>

  <p><strong>概要:</strong></p>
  <p *ngIf="!isEditing">{{ project.overview }}</p>
  <textarea *ngIf="isEditing" [(ngModel)]="project.overview"></textarea>

  <p><strong>期間:</strong> {{ project.startDate || "未設定" }}</p>
  <p><strong>メンバー:</strong> {{ project.members || "未設定" }}</p>
  <p><strong>タグ:</strong> {{ project.tags || "-" }}</p>

  <div style="margin-top: 10px">
    <button mat-raised-button color="primary" (click)="toggleEdit()">
      {{ isEditing ? "キャンセル" : "編集" }}
    </button>
    <button
      mat-raised-button
      color="accent"
      *ngIf="isEditing"
      (click)="saveChanges()"
    >
      保存
    </button>
  </div>
</div>

<ng-template #loading>
  <p>読み込み中...</p>
</ng-template>
